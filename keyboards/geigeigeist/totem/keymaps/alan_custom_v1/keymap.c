/*
*
*                                           ▀▀▀▀▀     ▀▀▀▀▀          ▀▀█▀▀
*                                           ▄▀▀▀▄  ▄  ▄▀▀▀▄  ▄  ▄▀▀▀▄  █  ▄▀▀▀▄
*                                           █   █  █  █   █  █  █   █  █  █   █
*                                            ▀▀▀   █   ▀▀▀   █   ▀▀▀   ▀   ▀▀▀
*                                                  █      ▄▄▄█▄▄▄    █   █
*                                                  ▀      █  █  █     █▄█
*                                                ▀▀▀▀▀    █  █  █      ▀   ┌─┐┌─╴╷┌──┬─
*                                                         ▀  ▀  ▀          │ ┐├─╴│└─┐│
*                                                                          └─┘└─╴╵╶─┘╵
▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
*/

#include QMK_KEYBOARD_H
#include <stdio.h>
#include "totem.h"

// ┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
// │ D E F I N I T I O N S                                                                                                  │
// └────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
// ▝▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▘

// ┌─────────────────────────────────────────────────┐
// │ d e f i n e   l a y e r s                       │
// └─────────────────────────────────────────────────┘

enum totem_layers {
    _NOTED,
    _MATH,
    _SYM,
    _NAV,
    _MOUSE,
    _FMED,
    _TEMP,
    _NUMBLK,
    _UML
};

// ┌─────────────────────────────────────────────────┐
// │ d e f i n e   k e y c o d e s                   │
// └─────────────────────────────────────────────────┘

enum custom_keycodes {
    AE = SAFE_RANGE,
    UE,
    OE,
    E_AIGU,
    E_GRV,
    A_GRV,
    U_GRV,
    C_EDIL,
    fv_UP,
    fv_DOWN,
    fv_LEFT,
    fv_RIGHT
};

// ┌─────────────────────────────────────────────────┐
// │ d e f i n e   c u s t o m   s h i f t           │
// └─────────────────────────────────────────────────┘

const custom_shift_key_t custom_shift_keys[] = {
    {KC_DOT , KC_COLN}, // Shift . is colon
    {KC_COMM, KC_SCLN}, // Shift , is semicolon
};


// ┌─────────────────────────────────────────────────┐
// │ d e f i n e   m a c r o n a m e s               │
// └─────────────────────────────────────────────────┘

// LEFT HAND HOME ROW MODS ├───────────────────────────────────┐
#define ALT_S LALT_T(KC_S)
#define CTL_I LCTL_T(KC_I)
#define SFT_E LSFT_T(KC_E)

// RIGHT HAND HOME ROW MODS ├───────────────────────────────────┐


// LAYER TAPS ├─────────────────────────────────────────────────┐
#define MOU_REP LT(_MOUSE, QK_REP)
#define NAV_SPC LT(_NAV, KC_SPC)
#define MAT_TAB LT(_MATH, KC_TAB)
#define GAC_MOD MT(MOD_LCTL | MOD_LGUI | MOD_LALT, KC_NO)


// ┌─────────────────────────────────────────────────┐
// │ d e f i n e   c o m b o s                       │
// └─────────────────────────────────────────────────┘

#define COMBO_MUST_HOLD_MODS

const uint16_t PROGMEM left_ind_mid[] = {KC_X, KC_Z, COMBO_END};
const uint16_t PROGMEM right_ind_mid_num[] = {KC_EQL, KC_COMM, COMBO_END};
const uint16_t PROGMEM right_ind_mid_base[] = {KC_G, KC_COMM, COMBO_END};
const uint16_t PROGMEM left_top_row[] = {KC_Y, KC_U, KC_A, COMBO_END};
const uint16_t PROGMEM both_thumbs_home[] = {LT(_NAV, KC_SPC), KC_LSFT, COMBO_END};
const uint16_t PROGMEM outer_2_right[] = {KC_R, KC_H, COMBO_END};

combo_t key_combos[] = {
    COMBO(left_ind_mid, KC_ESC),
    COMBO(right_ind_mid_num, KC_ENT),
    COMBO(right_ind_mid_base, KC_ENT),
    COMBO(left_top_row, TG(_NUMBLK)),
    COMBO(both_thumbs_home, KC_LGUI),
    COMBO(outer_2_right, KC_DEL)
};

// ┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
// │ K E Y M A P S                                                                                                          │
// └────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
// ▝▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▘

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

    /*
    * ┌─────────────────────────────────────────────────┐
    * │ n o t e d                                       │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡  _UML   │    Y    │    U    │    A    │    Q    ││    P    │    B    │    M    │    L    │    F    │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *           │    C    │  ALT_S  │  CTL_I  │  SFT_E  │    O    ││    D    │    T    │    N    │    R    │    H    │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │ GAC_MOD │    V    │    J    │    X    │    Z    │    -    ││    W    │    G    │    ,    │    .    │    K    │  BCKSP  │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │ MOU_REP │ NAV_SPC │ MAT_TAB ││  _SYM   │  SHIFT  │   LGUI  │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘*/

    [_NOTED] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                    MO(_UML),  KC_Y,     KC_U,     KC_A,     KC_Q,      KC_P,     KC_B,     KC_M,     KC_L,     KC_F,
                    KC_C,      ALT_S,    CTL_I,    SFT_E,    KC_O,      KC_D,     KC_T,     KC_N,     KC_R,     KC_H,
        GAC_MOD,    KC_V,      KC_J,     KC_X,     KC_Z,     KC_MINS,   KC_W,     KC_G,     KC_COMM,  KC_DOT,   KC_K,  KC_BSPC,
                                         MOU_REP,  NAV_SPC,  MAT_TAB,   MO(_SYM), KC_LSFT,  KC_LGUI
    ),

    /*
    * ╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
    *
    * ┌─────────────────────────────────────────────────┐
    * │ m a t h                                         │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡   F1    │   F2    │   F3    │    F4   │    F5   ││   F6    │   F11   │   F12   │   F9    │   F10   │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *           │    1    │    2    │    3    │    4    │    5    ││    6    │    7    │    8    │    9    │    0    │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │         │    '    │         │         │         │    -    ││    +    │    =    │    ,    │    .    │    :    │  BCKSP  │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │         │         │         ││         │         │         │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘*/

    [_MATH] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                     KC_F1,    KC_F2,    KC_F3,    KC_F4,    KC_F5,     KC_F6,    KC_F11,   KC_F12,   KC_F9,    KC_F10,
                     KC_1,     KC_2,     KC_3,     KC_4,     KC_5,      KC_6,     KC_7,     KC_8,     KC_9,     KC_0,
          _______,   KC_QUOT,  _______,  _______,  _______,  KC_MINS,   KC_PLUS,  KC_EQL,   KC_COMM,  KC_DOT,   KC_COLN,   KC_BSPC,
                                         _______,  _______,  _______,   _______,  _______,  _______
    ),

    /*
    * ╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
    *
    * ┌─────────────────────────────────────────────────┐
    * │ n e w s y m                                     │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡    "    │    @    │    #    │    %    │    ^    ││    ~    │    |    │    &    │    =    │         │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *           │    '    │    {    │    [    │    (    │    /    ││    \    │    >    │    ?    │    !    │    $    │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │         │    `    │    }    │    ]    │    )    │    -    ││    +    │    <    │    ,    │    .    │    *    │  BCKSP  │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │   ESC   │   SPC   │   TAB   ││    ▼    │ KC_LSFT │   DEL   │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘
    */

    [_SYM] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                     KC_DQUO,  KC_AT,    KC_HASH,  KC_PERC,  KC_CIRC,   KC_TILD,  KC_PIPE,  KC_AMPR,  KC_EQL,   XXXXXXX,
                     KC_QUOT,  KC_LCBR,  KC_LBRC,  KC_LPRN,  KC_SLSH,   KC_BSLS,  KC_RABK,  KC_QUES,  KC_EXLM,  KC_DLR,
           _______,  KC_GRV,   KC_RCBR,  KC_RBRC,  KC_RPRN,  KC_MINS,   KC_PLUS,  KC_LABK,  KC_COMM,  KC_DOT,   KC_ASTR,   KC_BSPC,
                                         _______,  _______,  _______,   _______,  _______,  _______
    ),

    /*
    * ╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
    *
    * ┌─────────────────────────────────────────────────┐
    * │ n a v                                           │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡         │         │         │         │         ││  REDO   │  ←←←←←  │  ↓↓↓↓↓  │  ↑↑↑↑↑  │  →→→→→  │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *           │   GUI   │   ALT   │   CTL   │  SHIFT  │         ││  CAPS   │    ←    │    ↓    │    ↑    │    →    │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │         │         │         │         │         │         ││         │  HOME   │  PG DN  │  PG UP  │   END   │ KC_BSPC │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │         │    ▼    │         ││   ENT   │  BSPC   │   DEL   │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘*/

    [_NAV] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                    XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,   KC_AGIN,  fv_LEFT,  fv_DOWN,  fv_UP,    fv_RIGHT,
                    XXXXXXX,  KC_LALT,  KC_LCTL,  KC_LSFT,  XXXXXXX,   KC_CAPS,  KC_LEFT,  KC_DOWN,  KC_UP,    KC_RGHT,
          _______,  XXXXXXX,  KC_LGUI,  SELWORD,  XXXXXXX,  XXXXXXX,   XXXXXXX,  KC_HOME,  KC_PGDN,  KC_PGUP,  KC_END,  KC_BSPC,
                                        XXXXXXX,  _______,  XXXXXXX,   _______,   _______,  _______
    ),

    /*
    * ╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
    *
    * ┌─────────────────────────────────────────────────┐
    * │ m o u s e                                       │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡         │         │         │         │         ││         │  PASTE  │  COPY   │   CUT   │  UNDO   │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *move app to│ wrkspc1 │ wrkspc2 │ wrkspc3 │ wrkspc4 │ wrkspc5 ││ wrkspc6 │   M←    │   M↓    │   M↑    │   M→    │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │         │         │         │         │         │         ││         │  WHL ←  │  WHL ↓  │  WHL ↑  │  WHL →  │         │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │    ▼    │         │         ││  BTN 2  │  BTN 1  │  BTN 3  │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘*/

    [_MOUSE] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                    XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,   XXXXXXX,  KC_PSTE,  KC_COPY,  KC_CUT,   KC_UNDO,
                    LSG(KC_1),LSG(KC_2),LSG(KC_3),LSG(KC_4),LSG(KC_5), LSG(KC_6),MS_LEFT,  MS_DOWN,  MS_UP,    MS_RGHT,
          _______,  XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,   LSG(KC_7),MS_WHLL,  MS_WHLD,  MS_WHLU,  MS_WHLR,  _______,
                                        _______,  XXXXXXX,  XXXXXXX,   MS_BTN2,  MS_BTN1,  MS_BTN3
    ),

    /*
    * ╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
    *
    * ┌─────────────────────────────────────────────────┐
    * │ f k e y s                                       │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡   F5    │   F6    │   F7    │   F8    │ KC_PSCR ││         │         │         │         │         │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *           │   F1    │   F2    │   F3    │   F4    │  SCRL   ││         │  PREV   │  VOL-   │  VOL+   │  NEXT   │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │         │   F9    │   F10   │   F11   │   F12   │  PAUSE  ││         │  STOP   │  PLAY   │  MUTE   │         │         │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │   APP   │   SPC   │   TAB   ││         │         │    ▼    │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘*/

    [_FMED] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                    KC_F5,    KC_F6,    KC_F7,    KC_F8,    KC_PSCR,   XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,
                    KC_F1,    KC_F2,    KC_F3,    KC_F4,    KC_SCRL,   XXXXXXX,  KC_MPRV,  KC_VOLD,  KC_VOLU,  KC_MNXT,
          _______,  KC_F9,    KC_F10,   KC_F11,   KC_F12,   KC_PAUS,   XXXXXXX,  KC_MPLY,  KC_MSTP,  KC_MUTE,  XXXXXXX,  _______,
                                        KC_APP,   KC_SPC,   KC_TAB,    XXXXXXX,  XXXXXXX,  _______
    ),

    /*
    * ╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
    *
    * ┌─────────────────────────────────────────────────┐
    * │ n u m b l o c k                                 │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡         │    7    │    8    │    9    │         ││         │         │         │         │         │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *           │    0    │    4    │    5    │    6    │    /    ││         │  SHIFT  │   CTL   │   ALT   │   GUI   │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │    ▼    │         │    1    │    2    │    3    │    -    ││    +    │    G    │    ,    │         │         │         │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │    0    │   SPC   │   TAB   ││         │         │         │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘*/

    [_NUMBLK] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                    XXXXXXX,  KC_7,     KC_8,     KC_9,     XXXXXXX,   XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,  XXXXXXX,
                    KC_0,     KC_4,     KC_5,     KC_6,     KC_PSLS,   TG(_NUMBLK),TG(_NUMBLK),TG(_NUMBLK),TG(_NUMBLK),XXXXXXX,
       TG(_NUMBLK), XXXXXXX,  KC_1,     KC_2,     KC_3,     KC_MINS,   KC_PLUS,  KC_G,     KC_COMM,  XXXXXXX,  XXXXXXX,  _______,
                                        KC_0,     KC_SPC,   KC_TAB,    TG(_NUMBLK),TG(_NUMBLK),TG(_NUMBLK)
    ),

    /*
    * ┌─────────────────────────────────────────────────┐
    * │ u m l                                           │      ╭╮╭╮╭╮╭╮
    * └─────────────────────────────────────────────────┘      │╰╯╰╯╰╯│
    *           ┌─────────┬─────────┬─────────┬─────────┬──────╨──┐┌──╨──────┬─────────┬─────────┬─────────┬─────────┐
    *   ╌┄┈┈───═╡    -    │    -    │    ü    │    ä    │    à    ││    -    │    -    │    -    │    -    │    -    │
    *           ├─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┤
    *           │    ç    │    -    │    ù    │    é    │    ö    ││    -    │    -    │    -    │    -    │    -    │
    * ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐
    * │ UC_NEXT │    -    │    -    │    -    │    è    │    -    ││    -    │    -    │    -    │    -    │    -    │         │
    * └─────────┴─────────┴─────────┼─────────┼─────────┼─────────┤├─────────┼─────────┼─────────┼─────────┴─────────┴─────────┘
    *                               │    -    │    -    │    -    ││    -    │    -    │    -    │
    *                               └─────────┴─────────┴─────────┘└─────────┴─────────┴─────────┘*/

    [_UML] = LAYOUT(
        //╷         ╷         ╷         ╷         ╷         ╷         ╷╷         ╷         ╷         ╷         ╷         ╷         ╷
                    _______,   _______,  UE,       AE,       A_GRV,     _______,  _______,  _______,  _______,  _______,
                    C_EDIL,    _______,  U_GRV,    E_AIGU,   OE,        _______,  _______,  _______,  _______,  _______,
        _______,    _______,   _______,  _______,  E_GRV,    _______,   _______,  _______,  _______,  _______,  _______,   _______,
                                         _______,  _______,  _______,   _______,  _______,  _______
    ),

};


// ┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
// │ M A C R O S                                                                                                            │
// └────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
// ▝▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▘

void matrix_init_user(void) {
    set_unicode_input_mode(UC_LINX);
}

bool process_record_user(uint16_t keycode, keyrecord_t *record) {
    // Only process on key press, not release
    if (!record->event.pressed) {
        return true;
    }

    // Check if shift is held
    bool shifted = get_mods() & MOD_MASK_SHIFT;

    switch (keycode) {
        case fv_LEFT:
            if (record->event.pressed) {
                tap_code(KC_LEFT);
                tap_code(KC_LEFT);
                tap_code(KC_LEFT);
                tap_code(KC_LEFT);
                tap_code(KC_LEFT);
            }
            return false;
        case fv_DOWN:
            if (record->event.pressed) {
                tap_code(KC_DOWN);
                tap_code(KC_DOWN);
                tap_code(KC_DOWN);
                tap_code(KC_DOWN);
                tap_code(KC_DOWN);
            }
            return false;

        case fv_UP:
            if (record->event.pressed) {
                tap_code(KC_UP);
                tap_code(KC_UP);
                tap_code(KC_UP);
                tap_code(KC_UP);
                tap_code(KC_UP);
            }
            return false;

        case fv_RIGHT:
            if (record->event.pressed) {
                tap_code(KC_RIGHT);
                tap_code(KC_RIGHT);
                tap_code(KC_RIGHT);
                tap_code(KC_RIGHT);
                tap_code(KC_RIGHT);
            }
            return false;

        case AE:
            if (shifted) {
                // Clear shift temporarily to type the correct character
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("Ä");
                register_mods(shifted);
            } else {
                send_unicode_string("ä");
            }
            return false;

        case UE:
            if (shifted) {
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("Ü");
                register_mods(shifted);
            } else {
                send_unicode_string("ü");
            }
            return false;

        case OE:
            if (shifted) {
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("Ö");
                register_mods(shifted);
            } else {
                send_unicode_string("ö");
            }
            return false;

        case E_AIGU:
            if (shifted) {
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("É");
                register_mods(shifted);
            } else {
                send_unicode_string("é");
            }
            return false;

        case E_GRV:
            if (shifted) {
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("È");
                register_mods(shifted);
            } else {
                send_unicode_string("è");
            }
            return false;

        case A_GRV:
            if (shifted) {
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("À");
                register_mods(shifted);
            } else {
                send_unicode_string("à");
            }
            return false;

        case U_GRV:
            if (shifted) {
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("Ù");
                register_mods(shifted);
            } else {
                send_unicode_string("ù");
            }
            return false;

        case C_EDIL:
            if (shifted) {
                unregister_mods(MOD_MASK_SHIFT);
                send_unicode_string("Ç");
                register_mods(shifted);
            } else {
                send_unicode_string("ç");
            }
            return false;
    }

    return true;
}

/*
 * ╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸
 *
 *
 *                                                        ██████
 *                                                          ██  ▄▄▄▄
 *                                                          ██ ██▀▀██
 *                                                          ▀▀ ██▄▄██
 *                                                      ██████  ▀▀▀▀
 *                                                        ██ ▄▄▄▄▄▄
 *                                                        ██ ██▀▀▀▀
 *                                                        ██ ██████
 *                                                           ██▄▄▄▄
 *                                                           ▀▀▀▀▀▀
 *                                                         ████████
 *                                                         ██ ██ ██
 *                                                         ██ ██ ██
 *                                                         ▀▀ ▀▀ ▀▀
 *                                                        ████████
 *
 */
